 <!DOCTYPE html>

<html lang="pt-BR" class="scroll-smooth">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Detalhes - Análise de Rede</title>

    

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simplelightbox/2.14.3/simple-lightbox.min.css" integrity="sha512-go9fGIVISQ40zPFKqsnRilS+UYl5wOOKLwykP5eu2f2Nn52A6f/2/S/j1r9I+N66yPLT/K/9o9mPYv/nS2r9g==" crossorigin="anonymous" referrerpolicy="no-referrer" />



    <style>

    </head>

        body {

            font-family: 'Inter', sans-serif;

            box-sizing: border-box;

        }

        

        /* Estilos copiados para consistencia */

        .timeline-item::before {

            content: '';

            position: absolute;

            left: -8px;

            top: 8px;

            width: 16px;

            height: 16px;

            background: #22d3ee; /* cyan-400 */

            border-radius: 50%;

            border: 3px solid #1f2937; /* gray-800 */

            box-shadow: 0 0 0 3px #4b5563; /* gray-600 */

        }

        

        .timeline-line {

            position: absolute;

            left: -1px;

            top: 24px;

            bottom: 0;

            width: 2px;

            background: #374151; /* gray-700 */

        }

        

        .fade-in {

            opacity: 0;

            transform: translateY(20px);

            transition: opacity 0.6s ease-out, transform 0.6s ease-out;

        }

        

        .fade-in.is-visible {

            opacity: 1;

            transform: translateY(0);

        }

        

        .section-card {

            transition: all 0.3s ease;

        }

        

        .section-card:hover {

            transform: translateY(-5px);

            box-shadow: 0 15px 30px -5px rgba(0,0,0,0.2);

        }



        .text-glow {

            text-shadow: 0 0 8px rgba(34, 211, 238, 0.4);

        }



        /* Estilo para el bloque de código */

        pre code {

            font-family: 'Menlo', 'Monaco', 'Consolas', 'Courier New', monospace;

            font-size: 13px;

            line-height: 1.6;

            color: #e5e7eb; /* gray-200 */

        }

    </style>

</head>

<body class="bg-gray-900 min-h-screen text-gray-300">

    <header class="bg-gray-900/80 backdrop-blur-lg shadow-lg shadow-cyan-500/5 sticky top-0 z-50">

        <nav class="max-w-6xl mx-auto px-6 py-4">

            <div class="flex justify-between items-center">

                <a href="index.html" class="text-xl font-bold text-white">Dr. Juan Carlos Teran Briceno</a>

                <div class="hidden md:flex items-center space-x-6">

                    <a href="index.html#education" class="text-gray-400 hover:text-cyan-400 font-medium transition-colors">Formação</a>

                    <a href="index.html#employment" class="text-gray-400 hover:text-cyan-400 font-medium transition-colors">Experiência</a>

                    <a href="index.html#achievements" class="text-gray-400 hover:text-cyan-400 font-medium transition-colors">Conquistas</a>

                    

                    <div class="relative group">

                        <button class="text-gray-400 hover:text-cyan-400 font-medium transition-colors inline-flex items-center">

                            <span>Disciplinas</span>

                            <svg class="w-5 h-5 ml-1" fill="currentColor" viewBox="0 0 20 20">

                                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />

                            </svg>

                        </button>

                        <div class="absolute left-1/2 -translate-x-1/2 z-10 w-48 hidden group-hover:block bg-gray-800 rounded-md shadow-lg border border-gray-700">

                            <div class="py-1">

                                <a href="analise_rede.html" class="block px-4 py-2 text-sm text-cyan-400 bg-gray-700 hover:text-white">Analise de Redes</a>
                                <a href="sankey_diagram.html" class="block px-4 py-2 text-sm text-cyan-400 bg-gray-700 hover:text-white">Metodologia Diagrama Sankey</a>
                                <a href="https://youtu.be/oVfLj2JfQEw?si=jXKPIU2XHj0UH7m0" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white">Bibliometria</a>

                            </div>

                        </div>

                    </div>

                    <a href="index.html#contact" class="bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-600 transition-all">Contato</a>

                </div>

                <div class="md:hidden">

                    <button id="mobile-menu-button" class="text-gray-300 focus:outline-none">

                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>

                    </button>

                </div>

            </div>

        </nav>

        <div id="mobile-menu" class="hidden md:hidden bg-gray-800 border-t border-gray-700">

            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">

                <a href="index.html#education" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Formação</a>

                <a href="index.html#employment" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Experiência</a>

                <a href="index.html#achievements" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Conquistas</a>

                <div>

                    <button id="mobile-disciplinas-button" class="w-full flex justify-between items-center px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">

                        <span>Disciplinas</span>

                        <svg class="w-5 h-5 transform transition-transform" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>

                    </button>

                    <div id="mobile-disciplinas-menu" class="hidden pl-4">

                        <a href="analise_rede.html" class="block px-3 py-2 rounded-md text-base font-medium text-cyan-400 bg-gray-700 hover:text-white">Analise de Redes</a>
                        <a href="sankey_diagram.html" class="block px-4 py-2 text-sm text-cyan-400 bg-gray-700 hover:text-white">Metodologia Diagrama Sankey</a>
                        <a href="https://youtu.be/oVfLj2JfQEw?si=jXKPIU2XHj0UH7m0" class="block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700">Bibliometria</a>

                    </div>

                </div>

                <a href="index.html#contact" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Contato</a>

            </div>

        </div>

    </header>

    <main class="max-w-6xl mx-auto px-6 py-12">

        

        <section class="mb-16 fade-in">

            <div class="bg-gray-800 rounded-2xl shadow-xl p-8 md:p-12 section-card border border-gray-700">

                

                <a href="index.html" class="text-cyan-400 hover:text-cyan-300 transition-colors mb-6 inline-block">&larr; Volver ao Perfil</a>



<section class="mb-16 fade-in">
            <div class="bg-gray-800 rounded-2xl shadow-xl p-8 md:p-12 section-card border border-gray-700">
                
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <h3 class="text-3xl font-bold text-white text-glow">Delineamento Metodológico Interativo</h3>
                    <span class="mt-2 md:mt-0 px-3 py-1 text-xs font-semibold text-gray-900 bg-cyan-400 rounded-full">Interativo</span>
                </div>

                <p class="text-lg text-gray-400 mb-8">
                    Este <strong>Diagrama de Sankey</strong> representa o fluxo metodológico das teses analisadas. 
                    Passe o mouse sobre os fluxos para visualizar a quantidade exata de conexões entre as quatro dimensões: 
                    <span class="text-cyan-400">Enfoque</span> &rarr; 
                    <span class="text-orange-400">Estratégia</span> &rarr; 
                    <span class="text-teal-400">Instrumentos</span> &rarr; 
                    <span class="text-purple-400">Análise</span>.
                </p>

                <div class="w-full h-[650px] bg-white rounded-xl overflow-hidden shadow-inner border border-gray-600 relative">
                    <iframe 
                        src="img/sankey_diagram.html" 
                        class="absolute top-0 left-0 w-full h-full border-0" 
                        title="Diagrama de Sankey Metodológico"
                        loading="lazy">
                    </iframe>
                </div>
                
                <p class="text-sm text-gray-500 mt-4 text-center italic">
                    * Se estiver no celular, rotacione a tela para melhor visualização.
                </p>
            </div>
        </section>

                <div class="bg-gray-700/50 rounded-lg p-6 border-l-4 border-cyan-500 my-8 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6">

    

    <div>

        <svg class="w-16 h-16 text-gray-400" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">

            <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.165 6.839 9.489.5.092.682-.217.682-.482 0-.237-.009-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.951 0-1.093.39-1.988 1.03-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.026 2.747-1.026.546 1.378.203 2.398.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.85-2.339 4.695-4.566 4.942.359.309.678.92.678 1.853 0 1.338-.012 2.419-.012 2.747 0 .267.18.577.688.48C19.135 20.165 22 16.418 22 12 22 6.477 17.523 2 12 2z" clip-rule="evenodd" />

        </svg>

    </div>

    

    <div class="flex-1 text-center md:text-left">

        <h4 class="text-xl font-bold text-white mb-2">Visita el Repositorio del Proyecto</h4>

        <p class="text-gray-300 mb-3">

            Para descargar el script completo, ver la documentación `README.md` y explorar el código fuente, visita el repositorio oficial en GitHub.

        </p>

        <a href="https://github.com/juanfisicobr/Metodologia-Sankey-Tese/" 

           target="_blank" 

           rel="noopener noreferrer"

           class="inline-block bg-cyan-500 text-white px-5 py-2 rounded-lg hover:bg-cyan-600 transition-all font-semibold shadow-lg shadow-cyan-500/20">

            Ir a GitHub &rarr;

        </a>

    </div>

</div>

                <h4 class="text-2xl font-semibold text-white mb-6">Script Python Completo</h4>

                <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 overflow-x-auto">

<pre><code class="language-python">

import pandas as pd
import plotly.graph_objects as go
import io

# ==============================================================================
# 1. CARREGAMENTO
# ==============================================================================
try:
    from google.colab import files
    print("Selecione o novo arquivo 'Tese tripla.xlsx' (ou CSV) com 4 colunas:")
    uploaded = files.upload()
    filename = next(iter(uploaded))

    if filename.endswith('.xlsx') or filename.endswith('.xls'):
        df = pd.read_excel(io.BytesIO(uploaded[filename]))
    else:
        df = pd.read_csv(io.BytesIO(uploaded[filename]))
except:
    # Fallback local
    filename = "Tese tripla.xlsx"
    try:
        df = pd.read_excel(filename)
    except:
        try:
             df = pd.read_csv(filename + " - Sheet 1.csv")
        except:
             print("Arquivo não encontrado.")

# ==============================================================================
# 2. LIMPEZA E PREPARAÇÃO (CORREÇÃO DO ÍNDICE AQUI)
# ==============================================================================
# Detecta as 4 primeiras colunas automaticamente
cols_interesse = df.columns[:4].tolist()
print(f"Colunas detectadas: {cols_interesse}")

def limpar_e_separar(texto):
    if pd.isna(texto): return []
    texto = str(texto).replace('\n', ';').replace(',', ';')
    return [p.strip() for p in texto.split(';') if p.strip() != '']

df_clean = df.copy()

for col in cols_interesse:
    df_clean[col] = df_clean[col].apply(limpar_e_separar)

# Explode sequencialmente
df_long = df_clean
for col in cols_interesse:
    df_long = df_long.explode(col)

df_long.reset_index(drop=True, inplace=True)
# ----------------------------------------------------

# Thesaurus
thesaurus = {
    'pesquisa-ação': 'Pesquisa-ação',
    'bibliográfico': 'bibliografias',
    'bibliográfica': 'bibliografias',
    'interpretativo': 'interpretativa',
    'intepretativo': 'interpretativa',
    'análise textual discursiva': 'Análise Textual Discursiva',
    'questionários': 'questionário',
    'entrevistas semiestruturadas': 'entrevista semiestruturada',
    'entrevista semiestruturada': 'entrevista semiestruturada',
    'entrevista': 'entrevistas',
    'analise': 'análise de conteúdo',
    'análise de conteúdo': 'Análise de Conteúdo',
    'bardin': 'Bardin',
    'estudo de casos múltiplos.': 'estudo de casos múltiplos',
    'não informado': 'Não Informado',
    'NÃO INFORMADO': 'Não Informado'
}
df_long.replace(thesaurus, inplace=True)
df_long.dropna(subset=cols_interesse, inplace=True)

# ==============================================================================
# 3. FILTRO (TOP N) E GERAÇÃO DE LINKS
# ==============================================================================
NUMERO_MAXIMO = 30

# Cria uma máscara booleana inicial (tudo True)
mask = pd.Series([True] * len(df_long))

for col in cols_interesse:
    # Pega os top termos desta coluna
    top_terms = df_long[col].value_counts().head(NUMERO_MAXIMO).index
    # Atualiza a máscara: mantém apenas linhas onde a coluna atual tem um termo top
    # Usamos .values para evitar problemas de alinhamento de índice
    mask = mask & df_long[col].isin(top_terms).values

df_final = df_long[mask]

links = []

def add_links(df, col_origem, col_destino, index_origem, index_destino):
    suf_origem = f"_{index_origem}"
    suf_destino = f"_{index_destino}"

    g = df.groupby([col_origem, col_destino]).size().reset_index(name='val')

    return [{
        'source': row[col_origem] + suf_origem,
        'target': row[col_destino] + suf_destino,
        'value': row['val']
    } for _, row in g.iterrows()]

# Conecta sequencialmente: Col1->Col2, Col2->Col3, Col3->Col4
for i in range(len(cols_interesse) - 1):
    links += add_links(df_final, cols_interesse[i], cols_interesse[i+1], i, i+1)

# ==============================================================================
# 4. VISUALIZAÇÃO
# ==============================================================================
all_nodes = list(set([l['source'] for l in links] + [l['target'] for l in links]))
node_map = {name: i for i, name in enumerate(all_nodes)}

sources = [node_map[l['source']] for l in links]
targets = [node_map[l['target']] for l in links]
values  = [l['value'] for l in links]

labels_display = [name.rsplit('_', 1)[0] for name in all_nodes]

# Cores consistentes por coluna
colors_palette = ["#E63946", "#F4A261", "#2A9D8F", "#264653", "#8A2BE2"]
node_colors = []
for node in all_nodes:
    idx = int(node.rsplit('_', 1)[1]) # Pega o sufixo numérico
    node_colors.append(colors_palette[idx % len(colors_palette)])

# Títulos automáticos
titulos_annotations = []
num_cols = len(cols_interesse)
for i, col_name in enumerate(cols_interesse):
    pos_x = i / (num_cols - 1) if num_cols > 1 else 0.5
    titulos_annotations.append(dict(
        x=pos_x, y=1.1,
        xref="paper", yref="paper",
        text=f"{col_name}",
        showarrow=False,
        font=dict(size=13, color="black"),
        xanchor="center"
    ))

fig = go.Figure(data=[go.Sankey(
    node = dict(
      pad = 15,
      thickness = 20,
      line = dict(color = "black", width = 0.5),
      label = labels_display,
      color = node_colors
    ),
    link = dict(
      source = sources,
      target = targets,
      value = values,
      color = "rgba(200, 200, 200, 0.3)"
  ))])

fig.update_layout(
    title_text="Delineamento Metodológico: Estratégia, Instrumentos e Análise",
    font_size=12,
    height=600,
    margin=dict(t=100),
    annotations=titulos_annotations
)

fig.show()

# ==============================================================================
# 5. EXPORTAR DADOS
# ==============================================================================
try:
    df_rel = pd.DataFrame(links)
    df_rel['source'] = df_rel['source'].astype(str).apply(lambda x: x.rsplit('_', 1)[0])
    df_rel['target'] = df_rel['target'].astype(str).apply(lambda x: x.rsplit('_', 1)[0])
    df_rel.columns = ['Origem', 'Destino', 'Frequência']
    df_rel = df_rel.sort_values(by='Frequência', ascending=False)

    nome_excel = "dados_sankey_4colunas.xlsx"
    df_rel.to_excel(nome_excel, index=False)
    print(f"\nTabela de dados salva como '{nome_excel}'")
    from google.colab import files
    files.download(nome_excel)
except:
    pass



</code></pre>

                </div>



            </div>

        </section>



    </main>

    <footer id="contact" class="bg-black py-12">

        <div class="max-w-6xl mx-auto px-6 text-center">

            <h3 class="text-3xl font-bold text-white text-glow mb-4">Entre em Contato</h3>

            <p class="text-gray-400 mb-6 max-w-lg mx-auto">Sinta-se à vontade para entrar em contato para colaborações, palestras ou outras oportunidades profissionais.</p>

            <a href="mailto:juanfisico23@furg.br" class="inline-block bg-cyan-500 text-white px-6 py-3 rounded-lg hover:bg-cyan-600 transition-all text-lg font-semibold shadow-lg shadow-cyan-500/20">

                Enviar E-mail

            </a>

            <div class="mt-8 border-t border-gray-700 pt-8">

                <p class="text-gray-500">© 2024 Dr. Juan Carlos Teran Briceno</p>

            </div>

        </div>

    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplelightbox/2.14.3/simple-lightbox.min.js" integrity="sha512-jEJn/sB1AAqF/3Bw/sxy33m2w3Q6c09bTj6s0QnB1iY/v2iQGLjUu9vD/mIY21+Pn9sE/i/g1NqT/sJ/OnXgA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>

        document.addEventListener('DOMContentLoaded', () => {

            const observerOptions = {

                threshold: 0.1,

                rootMargin: '0px 0px -50px 0px'

            };



            const observer = new IntersectionObserver((entries, observer) => {

                entries.forEach(entry => {

                    if (entry.isIntersecting) {

                        entry.target.classList.add('is-visible');

                        observer.unobserve(entry.target);

                    }

                });

            }, observerOptions);



            document.querySelectorAll('.fade-in').forEach(el => {

                observer.observe(el);

            });



            // Mobile menu toggle

            const mobileMenuButton = document.getElementById('mobile-menu-button');

            const mobileMenu = document.getElementById('mobile-menu');

    

            mobileMenuButton.addEventListener('click', () => {

                mobileMenu.classList.toggle('hidden');

            });

    

            // Mobile dropdown toggle for Disciplinas

            const mobileDisciplinasButton = document.getElementById('mobile-disciplinas-button');

            const mobileDisciplinasMenu = document.getElementById('mobile-disciplinas-menu');

            const mobileDisciplinasArrow = mobileDisciplinasButton.querySelector('svg');

    

            mobileDisciplinasButton.addEventListener('click', (e) => {

                e.preventDefault(); // Prevent default button behavior

                mobileDisciplinasMenu.classList.toggle('hidden');

                mobileDisciplinasArrow.classList.toggle('rotate-180');

            });

        });

    </script>

</body>

</html>
